{% extends 'blog/base.html' %}
{% load blog %}
{% load static %}
{% block description %}Python/Djangoを中心に、プログラミングのメモや備忘録、チュートリアルを書いています。{% endblock %}
{% block title %}{{ block.super }} - プログラミングのメモや備忘録、チュートリアル{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'blog/post_search.css' %}">{% endblock %}

{% block content %}
    <main>
        <form action="" method="get" role="search">
            {{ form.as_p }}
            <p>
                <button type="submit" class="orange-button">送信</button>
            </p>
        </form>

            {% for post in post_list %}
            <article>
                <h3><a href="{% url 'blog:post_detail' post.pk %}">{{ post.title }}</a></h3>
                 <div class="tags">
                    {% for tag in post.tags.all %}
                        <span>{{ tag }} </span>
                    {% endfor %}
                </div>
                <time datetime="{{ post.updated_at | date:'Y-m-d' }}"><i class="far fa-clock" aria-hidden="true"></i>{% by_the_time post.updated_at %}</time>
                {% if user.is_authenticated %}
                    <p class="update"><a href="{% url 'blog:post_update' post.pk %}">更新</a></p>
                {% endif %}
            </article>
            {% endfor %}
            <nav class="page">
                <ul>
                    <!-- 数字の部分 -->
                    {% for num in page_obj.paginator.page_range %}
                        {% if page_obj.number == num %}
                            <li><span>{{ num }}</span></li>
                        {% else %}
                            <li><a href="?{% url_replace request 'page' num %}">{{ num }}</a></li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </nav>

    </main>

{% endblock %}

{% block extra_js %}
    {{ form.media }}
{% endblock %}
